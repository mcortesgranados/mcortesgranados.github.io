<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Event Sourcing</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            text-align: center;
        }
        .container {
            max-width: 800px;
            margin: auto;
            padding: 20px;
            border: 1px solid #ddd;
            border-radius: 10px;
            box-shadow: 2px 2px 10px rgba(0, 0, 0, 0.2);
        }
        h1 {
            color: #0275d8;
        }
        p {
            font-size: 18px;
            line-height: 1.5;
        }
        .step {
            font-size: 18px;
            margin: 10px 0;
        }
        .example {
            font-size: 16px;
            margin-top: 10px;
            font-style: italic;
        }
        .benefits, .steps {
            margin-top: 20px;
            text-align: left;
        }
        button {
            padding: 10px 20px;
            font-size: 16px;
            cursor: pointer;
            margin-top: 20px;
        }
    </style>
</head>
<body>

    <div class="container">
        <h1>Event Sourcing Pattern</h1>

        <h2>What is Event Sourcing?</h2>
        <p><strong>Event Sourcing</strong> is a software architectural pattern where changes to the application's state are not stored as a simple record update. Instead, every change is captured as an immutable event that represents a state transition. This allows the application to rebuild its state by replaying all events, providing a complete history of state changes.</p>

        <h2>Benefits of Event Sourcing:</h2>
        <div class="benefits">
            <ul>
                <li>🔄 **Full History Tracking** – Every state change is captured as an event, making it easy to trace and audit changes over time.</li>
                <li>🔑 **Rebuild State** – The current state can always be reconstructed by replaying the events, which enables flexibility in handling state changes.</li>
                <li>📊 **Rich Analytics** – Events provide detailed insights into the system’s behavior and can be used for better decision-making and reporting.</li>
                <li>⚡ **Optimized Performance** – Storing events in an append-only log can make write operations faster, as there are no complex updates to be performed on existing records.</li>
            </ul>
        </div>

        <h2>How Event Sourcing Works:</h2>
        <div class="steps">
            <div class="step">1. **Event Creation**: When a change occurs in the system (e.g., a user makes a payment), an event is created representing that change.</div>
            <div class="step">2. **Event Storage**: The event is stored in an event store (a specialized database for events) as an immutable record.</div>
            <div class="step">3. **State Reconstruction**: To view the current state, the system can replay all stored events to rebuild the state based on the sequence of events.</div>
        </div>

        <h2>Example Use Case:</h2>
        <p class="example">In an **e-commerce application**, instead of directly updating an order's status (e.g., from "Pending" to "Shipped"), an event is generated for each status change, such as "Order Placed" or "Order Shipped". The system can then replay these events to reconstruct the current state of the order at any point in time.</p>

        <h2>Visual Example:</h2>
        <img src="https://upload.wikimedia.org/wikipedia/commons/a/a2/Event_Sourcing_Architecture.svg" alt="Event Sourcing Diagram" width="100%">

        <h2>Simulate Event Sourcing</h2>
        <p>Click below to simulate the process of storing and replaying events:</p>
        <button onclick="simulateEventSourcing()">Simulate Event Sourcing</button>
        <div id="status"></div>
    </div>

    <script>
        function simulateEventSourcing() {
            const statusDiv = document.getElementById("status");
            statusDiv.innerHTML = "📝 Creating event...";

            setTimeout(() => {
                statusDiv.innerHTML = "📦 Event 'Order Placed' stored!";
            }, 2000); // Simulate event creation

            setTimeout(() => {
                statusDiv.innerHTML = "🔄 Replaying events to reconstruct the state...";
            }, 4000); // Simulate wait for state reconstruction

            setTimeout(() => {
                statusDiv.innerHTML = "✅ Current State: 'Order Shipped' successfully reconstructed!";
            }, 6000); // Complete simulation
        }
    </script>

</body>
</html>
